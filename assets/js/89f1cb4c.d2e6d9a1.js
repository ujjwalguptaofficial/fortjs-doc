"use strict";(self.webpackChunkmy=self.webpackChunkmy||[]).push([[6049],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>g});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(r),m=a,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return r?n.createElement(g,s(s({ref:t},c),{},{components:r})):n.createElement(g,s({ref:t},c))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:a,s[1]=o;for(var p=2;p<i;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6121:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const i={},s="Rest",o={unversionedId:"guides/rest",id:"guides/rest",title:"Rest",description:"Fort.js is crafted in accordance with the principles of RESTful APIs, offering a seamless and straightforward approach to building RESTful services.",source:"@site/docs/guides/rest.md",sourceDirName:"guides",slug:"/guides/rest",permalink:"/docs/guides/rest",draft:!1,editUrl:"https://github.com/ujjwalguptaofficial/fortjs-doc/tree/main/docs/guides/rest.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/docs/guides/database"},next:{title:"Http Result",permalink:"/docs/http-result"}},l={},p=[{value:"Implementation",id:"implementation",level:2},{value:"1. Data Storage",id:"1-data-storage",level:2},{value:"2. Create Controller",id:"2-create-controller",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rest"},"Rest"),(0,a.kt)("p",null,"Fort.js is crafted in accordance with the principles of RESTful APIs, offering a seamless and straightforward approach to building RESTful services."),(0,a.kt)("p",null,"In this tutorial, we'll guide you through the process of building a simple REST API using Fort.js. The focus will be on simplicity, and we'll store data in memory for demonstration purposes."),(0,a.kt)("h2",{id:"implementation"},"Implementation"),(0,a.kt)("p",null,"Our requirement is to create ",(0,a.kt)("inlineCode",{parentName:"p"},"user")," REST endpoints for handling user-related operations."),(0,a.kt)("h2",{id:"1-data-storage"},"1. Data Storage"),(0,a.kt)("p",null,"The first important part is to create a storage layer where we can access the data.\nFor this - Let's create a user service to handle user-related operations. In the services folder, create a file named UserService.ts:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=services/UserService.ts",title:"services/UserService.ts"},"\nexport class UserService {\n  private users: { [key: string]: any } = {};\n\n  addUser(id: string, username: string, email: string) {\n    this.users[id] = { id, username, email };\n  }\n\n  getUser(id: string) {\n    return this.users[id];\n  }\n\n  getAllUsers() {\n    return Object.values(this.users);\n  }\n}\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The primary goal of the User Service is to establish a foundation for efficient data storage and retrieval, catering specifically to user-related functionalities."),(0,a.kt)("blockquote",{parentName:"admonition"},(0,a.kt)("p",{parentName:"blockquote"},"By creating a service layer, you can encapsulate database-related logic, making your controllers more focused on handling HTTP requests and improving the testability of your application. This separation of concerns enhances code modularity and maintainability in the long run."))),(0,a.kt)("h2",{id:"2-create-controller"},"2. Create Controller"),(0,a.kt)("p",null,"Create a user controller to handle API endpoints related to users. In the controllers folder, create a file named UserController.ts:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=controllers/UserController.ts",title:"controllers/UserController.ts"},"\nimport { Controller, singleton, http jsonResult, textResult } from 'fortjs';\nimport { UserService } from '@/services/UserService';\n\nexport class UserController extends Controller {\n  private userService: UserService;\n\n  constructor(@singleton(UserService) userService: UserService) {\n    super();\n    this.userService = userService;\n  }\n\n  @http.get(\"/\")\n  async getAllUser() {\n    const users = this.userService.getAllUsers();\n    return jsonResult(users);\n  }\n\n  @http.post(\"/\")\n  async createUser() {\n    const { id, username, email } = this.body;\n    this.userService.addUser(id, username, email);\n    return textResult('User added successfully');\n  }\n\n  @http.get(\"/{id}\")\n  async getUser() {\n    const { id } = this.params;\n    const user = this.userService.getUser(id);\n    return jsonResult(user);\n  }\n}\n")),(0,a.kt)("p",null,"In the above snippet - We have created three different methods mapping with respective route."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Method: ",(0,a.kt)("inlineCode",{parentName:"strong"},"getAllUser"))),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"HTTP Method:")," GET"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Path:"),' "/"'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Description:")," Fetches all user data."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Implementation:")," Calls ",(0,a.kt)("inlineCode",{parentName:"li"},"getAllUsers")," in ",(0,a.kt)("inlineCode",{parentName:"li"},"UserService")," and returns a JSON response."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Method: ",(0,a.kt)("inlineCode",{parentName:"strong"},"createUser"))),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"HTTP Method:")," POST"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Path:"),' "/"'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Description:")," Creates a new user."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Implementation:")," Extracts user details, calls ",(0,a.kt)("inlineCode",{parentName:"li"},"addUser")," in ",(0,a.kt)("inlineCode",{parentName:"li"},"UserService"),", and returns a success message."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Method: ",(0,a.kt)("inlineCode",{parentName:"strong"},"getUser"))),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"HTTP Method:")," GET"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Path:"),' "/{id}"'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Description:")," Retrieves user details by ID."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Implementation:")," Extracts user ID, calls ",(0,a.kt)("inlineCode",{parentName:"li"},"getUser")," in ",(0,a.kt)("inlineCode",{parentName:"li"},"UserService"),", and returns a JSON response.")))),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"We've utilized the ",(0,a.kt)("inlineCode",{parentName:"p"},"singleton")," decorator to inject the ",(0,a.kt)("inlineCode",{parentName:"p"},"userService")," into our controller. This approach enhances the testability of our controller. For detailed information, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/dependency-injection"},"Dependency Injection documentation"),".")),(0,a.kt)("p",null,"Similar to GET and POST API - you can create DELETE api. We will leave this to you but if needed help - feel free to ask in the github discussion."))}d.isMDXComponent=!0}}]);