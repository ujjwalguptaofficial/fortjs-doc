"use strict";(self.webpackChunkmy=self.webpackChunkmy||[]).push([[7009],{3905:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>h});var o=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=o.createContext({}),d=function(e){var r=o.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},u=function(e){var r=d(e.components);return o.createElement(l.Provider,{value:r},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},m=o.forwardRef((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=d(t),m=n,h=p["".concat(l,".").concat(m)]||p[m]||c[m]||a;return t?o.createElement(h,i(i({ref:r},u),{},{components:t})):o.createElement(h,i({ref:r},u))}));function h(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,i=new Array(a);i[0]=m;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s[p]="string"==typeof e?e:n,i[1]=s;for(var d=2;d<a;d++)i[d]=t[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3216:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var o=t(7462),n=(t(7294),t(3905));const a={title:"Customize Error",keywords:["customize error","handle error","fortjs","node"],description:"How to customize error in nodejs using fortjs"},i="Customize Error",s={unversionedId:"advanced/customize-error",id:"advanced/customize-error",title:"Customize Error",description:"How to customize error in nodejs using fortjs",source:"@site/docs/advanced/customize-error.md",sourceDirName:"advanced",slug:"/advanced/customize-error",permalink:"/docs/advanced/customize-error",draft:!1,editUrl:"https://github.com/ujjwalguptaofficial/fortjs-doc/tree/main/docs/advanced/customize-error.md",tags:[],version:"current",frontMatter:{title:"Customize Error",keywords:["customize error","handle error","fortjs","node"],description:"How to customize error in nodejs using fortjs"},sidebar:"tutorialSidebar",previous:{title:"Components",permalink:"/docs/advanced/components"},next:{title:"Format Response",permalink:"/docs/advanced/format-response"}},l={},d=[{value:"Create ErrorHandler",id:"create-errorhandler",level:2},{value:"Use ErrorHandler",id:"use-errorhandler",level:2},{value:"Error Handling Methods",id:"error-handling-methods",level:2}],u={toc:d},p="wrapper";function c(e){let{components:r,...t}=e;return(0,n.kt)(p,(0,o.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"customize-error"},"Customize Error"),(0,n.kt)("p",null,"Handling various errors, such as exceptions or route not found scenarios, is common in a web server. FortJs provides default handling for these errors with simple HTTP responses. However, you might want to customize these responses for better messages or to facilitate error logging."),(0,n.kt)("p",null,"To achieve this customization, follow these steps:"),(0,n.kt)("h2",{id:"create-errorhandler"},"Create ErrorHandler"),(0,n.kt)("p",null,"To customize error responses in FortJs, create a class that extends the ErrorHandler class and override the available methods."),(0,n.kt)("p",null,"For example, if you want to customize the error response for the status code 404:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'import { ErrorHandler } from "fortjs";\n\nexport class CustomErrorHandler extends ErrorHandler {\n    async onNotFound(url){\n       return htmlResult(`<h1>The resource ${url} does not exist.</h1>`);\n    }\n}\n')),(0,n.kt)("h2",{id:"use-errorhandler"},"Use ErrorHandler"),(0,n.kt)("p",null,"Once you've created the error handler class to customize HTTP responses, you need to inform FortJs about it."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'import { Fort } from "fortjs";\nimport { UserController } from "./controllers";\nimport { CustomErrorHandler } from "./extra/custom_error_handler";\n\n\n//add routes\nFort.routes = [{\n    controller: UserController,\n    path: "/user"\n}];\n\n//highlight-start\nFort.errorHandler = CustomErrorHandler;  \n//highlight-end\n\nFort.create();\n')),(0,n.kt)("h2",{id:"error-handling-methods"},"Error Handling Methods"),(0,n.kt)("p",null,"When creating a custom error handler in FortJs, you have several methods that you can override to customize the handling of specific HTTP error scenarios. The available methods are:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onServerError(ex: IException): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle server errors (Status code - 500). It is recommended not to expose exception information to users but to log the errors."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onBadRequest(ex: IException): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle bad request errors."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onForbiddenRequest(): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle forbidden request errors."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onNotAcceptableRequest(): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle not acceptable request errors."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onMethodNotAllowed(): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle method not allowed errors."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"onNotFound(url: string): Promise<IHttpResult>")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Override this method to handle not found errors, providing the requested URL.")))),(0,n.kt)("p",null,"For example, for ",(0,n.kt)("inlineCode",{parentName:"p"},"onServerError")," (Status code - 500), it's advisable not to show exception information to users but to log the errors."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Note:"),"\nIt is highly recommended to create a custom error handler and at least override the ",(0,n.kt)("inlineCode",{parentName:"p"},"onServerError")," method to log the exception. This ensures that you have information about the exceptions that occur."))}c.isMDXComponent=!0}}]);